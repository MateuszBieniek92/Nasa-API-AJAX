$(function(){function i(){g.on("click",function(){$("html, body").animate({scrollTop:I.top},2e3)})}function n(i,n){return Math.floor(Math.random()*(n-i+1))+i}function t(){return n(2005,2016)+"-"+n(1,12)+"-"+n(1,28)}function e(){o(),C.eq(W).css("opacity",0),$(".visible").animate({opacity:0},2e3,function(){$(this).removeClass("visible"),C.eq(W).addClass("visible").animate({opacity:1},2e3)})}function o(){w.append(b),w.append(y),w.append(k),k.delay(500).fadeIn("slow"),b.delay(500).fadeIn("slow")}function a(){w.prepend(b),w.prepend(y),w.prepend(k),k.fadeOut("slow"),b.fadeOut("slow")}function s(i){$.ajax({url:u+t()}).done(function(n){var t=n.hdurl;$("<img>").attr("src",t).on("load",function(){c(i,t),x.addClass("visible").animate({opacity:1},500),a()}).on("error",function(){console.log("error!"),++error>5&&alert("Nie moge pobrać zdjęć")})}).fail(function(){alert("Brak połączenia z API NASA")})}function c(i,n){var t=$("<li>").css({"background-image":"url("+n+")"});"init"===i?(m.append(t),t.addClass("visible")):"next"===i?(m.append(t),t.addClass("visible")):"prev"===i&&(m.prepend(t),m.css("left",-(W+1)*sectionOneWidth+"px"))}function r(i){void 0===i&&(i="init");var n=m.find("li");W>=n.length?(W<0&&(W=0),s(i)):c(i)}function d(i){$.each(i,function(i,n){if(l.matches)var t=$("<li>").css("display","flex").css("flex-direction","column").css("width","100vw").css({"background-image":"url("+n.img_src+")"});else if(p.matches)var t=$("<li>").css("display","flex").css("flex-direction","row").css("width","33vw").css({"background-image":"url("+n.img_src+")"});A.append(t)})}var l=window.matchMedia("screen and (max-width: 599px)"),p=window.matchMedia("screen and (min-width: 900px)"),u=(window.matchMedia("screen and (min-width: 600px) and (max-width: 899px)"),"https://api.nasa.gov/planetary/apod?api_key=YJxJW0IUSKxKADo5NqCyWhDkKWnchFkXGm06sTfW&date="),f="https://api.nasa.gov/mars-photos/api/v1/rovers/curiosity/photos?earth_date=2016-6-3&api_key=YJxJW0IUSKxKADo5NqCyWhDkKWnchFkXGm06sTfW",m=$(".photo"),h=$(".btnLeft"),v=$(".btnRight"),x=$(".text"),w=$(".sectionOne"),g=$(".btnBottom"),b=$('<div class="load">'),y=$('<div class="loaderContainer">'),k=y.append('<div class="loader">'),C=m.find("li"),W=C.index($(".visible")),A=(C.length,$(".gallery")),z=$(".sectionTwo");W=0,$(window).on("scroll",function(){var i=$(document).scrollTop();g.show(),0!==i&&g.hide()});var I=z.offset();$(window).resize(i),i(),function(){w.width()}(),r(),function(){v.outerWidth(),time=500,l.matches?v.on("click",function(){W+=1,r("next"),e(),x.addClass("visible").animate({opacity:0},time)}):v.on("mouseenter",function(){$(this).stop().animate({right:"35px"},time)}).on("mouseout",function(){$(this).stop().animate({right:"-20px"},time)}).on("click",function(){W+=1,r("next"),e(),x.addClass("visible").animate({opacity:0},time)})}(),function(){time=500,h.outerWidth(),l.matches?h.on("click",function(){W+=1,r("next"),e(),x.addClass("visible").animate({opacity:0},time)}):h.on("mouseenter",function(){$(this).stop().animate({left:"35px"},time)}).on("mouseout",function(){$(this).stop().animate({left:"-20px"},time)}).on("click",function(){W+=1,r("next"),e(),x.addClass("visible").animate({opacity:0},500)})}(),function(i){$.ajax({url:f}).done(function(i){var n=i.photos;d(i.photos),$("<img>").attr("src",n.img_src).on("error",function(){console.log("error!"),++error>5&&alert("Nie moge pobrać zdjęć")})}).fail(function(){alert("Brak połączenia z API NASA")})}()});