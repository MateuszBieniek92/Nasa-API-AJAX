$(function(){function n(n,i){return Math.floor(Math.random()*(i-n+1))+n}function i(){return n(2005,2016)+"-"+n(1,12)+"-"+n(1,28)}function t(){e(),k.eq(W).css("opacity",0),$(".visible").animate({opacity:0},2e3,function(){$(this).removeClass("visible"),k.eq(W).addClass("visible").animate({opacity:1},2e3)})}function e(){x.append(g),x.append(b),x.append(y),y.delay(500).fadeIn("slow"),g.delay(500).fadeIn("slow")}function o(){x.prepend(g),x.prepend(b),x.prepend(y),y.fadeOut("slow"),g.fadeOut("slow")}function a(n){$.ajax({url:p+i()}).done(function(i){var t=i.hdurl;$("<img>").attr("src",t).on("load",function(){s(n,t),v.addClass("visible").animate({opacity:1},500),o()}).on("error",function(){console.log("error!"),++error>5&&alert("Nie moge pobrać zdjęć")})}).fail(function(){alert("Brak połączenia z API NASA")})}function s(n,i){var t=$("<li>").css({"background-image":"url("+i+")"});"init"===n?(f.append(t),t.addClass("visible")):"next"===n?(f.append(t),t.addClass("visible")):"prev"===n&&(f.prepend(t),f.css("left",-(W+1)*sectionOneWidth+"px"))}function c(n){void 0===n&&(n="init");var i=f.find("li");W>=i.length?(W<0&&(W=0),a(n)):s(n)}function r(n){$.each(n,function(n,i){if(d.matches)var t=$("<li>").css("display","flex").css("flex-direction","column").css("width","100vw").css({"background-image":"url("+i.img_src+")"});else if(l.matches)var t=$("<li>").css("display","flex").css("flex-direction","row").css("width","33vw").css({"background-image":"url("+i.img_src+")"});C.append(t)})}var d=window.matchMedia("screen and (max-width: 550px)"),l=window.matchMedia("screen and (min-width: 900px)"),p=(window.matchMedia("screen and (min-width: 551px) and (max-width: 899px)"),"https://api.nasa.gov/planetary/apod?api_key=YJxJW0IUSKxKADo5NqCyWhDkKWnchFkXGm06sTfW&date="),u="https://api.nasa.gov/mars-photos/api/v1/rovers/curiosity/photos?earth_date=2016-6-3&api_key=YJxJW0IUSKxKADo5NqCyWhDkKWnchFkXGm06sTfW",f=$(".photo"),m=$(".btnLeft"),h=$(".btnRight"),v=$(".text"),x=$(".sectionOne"),w=$(".btnBottom"),g=$('<div class="load">'),b=$('<div class="loaderContainer">'),y=b.append('<div class="loader">'),k=f.find("li"),W=k.index($(".visible")),C=(k.length,$(".gallery"));$(".sectionTwo");W=0,$(window).on("scroll",function(){var n=$(document).scrollTop();w.show(),0!==n&&w.hide()}),w.on("click",function(){$("html, body").animate({scrollTop:872},2e3)}),function(){x.width()}(),c(),function(){h.outerWidth(),h.on("mouseenter",function(){$(this).stop().animate({right:"35px"},time)}).on("mouseout",function(){$(this).stop().animate({right:"-20px"},time)}).on("click",function(){W+=1,c("next"),t(),v.addClass("visible").animate({opacity:0},500)})}(),function(){m.outerWidth(),time=500,m.on("mouseenter",function(){$(this).stop().animate({left:"35px"},time)}).on("mouseout",function(){$(this).stop().animate({left:"-20px"},time)}).on("click",function(){W+=1,c("next"),t(),v.addClass("visible").animate({opacity:0},500)})}(),function(n){$.ajax({url:u}).done(function(n){var i=n.photos;r(n.photos),$("<img>").attr("src",i.img_src).on("error",function(){console.log("error!"),++error>5&&alert("Nie moge pobrać zdjęć")})}).fail(function(){alert("Brak połączenia z API NASA")})}()});